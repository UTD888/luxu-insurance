
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Luxu Insurance - SVG Card Picker</title>
  <style>
    body {
      background: #000;
      color: #fff;
      font-family: sans-serif;
      text-align: center;
      padding: 16px;
    }
    h1 {
      color: #ffd700;
      font-size: 28px;
      text-shadow: 0 0 10px #ffd700;
    }
    .card {
      width: 60px;
      height: 90px;
      border: 2px dashed #ffd700;
      background: #111;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .card img {
      max-width: 100%;
      max-height: 100%;
    }
    .player, .board-cards {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      margin-bottom: 16px;
    }
    .controls {
      margin: 10px 0;
    }
    .popup {
      position: fixed;
      top: 10%;
      left: 50%;
      transform: translateX(-50%);
      background: #222;
      padding: 10px;
      border-radius: 10px;
      display: none;
      z-index: 1001;
    }
    .popup-tabs {
      display: flex;
      justify-content: center;
      margin-bottom: 10px;
      gap: 10px;
    }
    .popup-tabs button {
      padding: 6px 12px;
      border: none;
      border-radius: 4px;
      background: #444;
      color: white;
      cursor: pointer;
    }
    .popup-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 6px;
    }
    .popup-card {
      background: #000;
      border-radius: 4px;
      cursor: pointer;
    }
    .popup-card img {
      width: 100%;
      height: auto;
    }
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: rgba(0,0,0,0.6);
      z-index: 1000;
      display: none;
    }
  </style>
</head>
<body>
  <h1>Luxu Insurance</h1>

  <div class="board-cards" id="board">
    <div class="card" data-slot="Flop1"></div>
    <div class="card" data-slot="Flop2"></div>
    <div class="card" data-slot="Flop3"></div>
    <div class="card" data-slot="Turn"></div>
  </div>

  <div class="player" id="players">
    <div class="card" data-slot="P1C1"></div>
    <div class="card" data-slot="P1C2"></div>
    <div class="card" data-slot="P2C1"></div>
    <div class="card" data-slot="P2C2"></div>
  </div>

  <div class="controls">
    <button onclick="openPicker()">Open Picker</button>
  </div>

  <div class="overlay" id="overlay" onclick="closePicker()"></div>
  <div class="popup" id="popup">
    <div class="popup-tabs">
      <button onclick="showSuit('s')">♠</button>
      <button onclick="showSuit('h')">♥</button>
      <button onclick="showSuit('d')">♦</button>
      <button onclick="showSuit('c')">♣</button>
    </div>
    <div class="popup-grid" id="popupGrid"></div>
  </div>

  <script>
    const svgBase = "https://raw.githubusercontent.com/UTD888/luxu-insurance/7bcf012e89261efbc5d8992db02a43626e77556a/svg-cards/";
    const suits = ['s', 'h', 'd', 'c'];
    const ranks = ['A','K','Q','J','T','9','8','7','6','5','4','3','2'];
    let currentSlot = null;
    const usedCards = new Set();

    function mapToFilename(rank, suit) {
      const suitNames = {
        s: 'spades',
        h: 'hearts',
        d: 'diamonds',
        c: 'clubs'
      };
      const faces = {
        'A': 'ace',
        'K': 'king',
        'Q': 'queen',
        'J': 'jack',
        'T': '10'
      };
      const rankName = faces[rank] || rank;
      return `${rankName}_of_${suitNames[suit]}.svg`;
    }

    document.querySelectorAll('.card').forEach(c => {
      c.onclick = () => {
        currentSlot = c;
        openPicker();
      };
    });

    function openPicker() {
      document.getElementById('overlay').style.display = 'block';
      document.getElementById('popup').style.display = 'block';
      showSuit('s');
    }

    function closePicker() {
      document.getElementById('overlay').style.display = 'none';
      document.getElementById('popup').style.display = 'none';
    }

    function showSuit(suit) {
      const grid = document.getElementById('popupGrid');
      grid.innerHTML = '';
      for (let rank of ranks) {
        const filename = mapToFilename(rank, suit);
        const code = rank + suit;
        const img = document.createElement('img');
        img.src = svgBase + filename;
        const div = document.createElement('div');
        div.className = 'popup-card';
        div.appendChild(img);
        if (usedCards.has(code)) {
          div.style.opacity = 0.2;
          div.style.pointerEvents = 'none';
        } else {
          div.onclick = () => {
            if (currentSlot) {
              const prev = currentSlot.dataset.card;
              if (prev) usedCards.delete(prev);
              usedCards.add(code);
              currentSlot.innerHTML = '';
              const newImg = document.createElement('img');
              newImg.src = svgBase + filename;
              currentSlot.appendChild(newImg);
              currentSlot.dataset.card = code;
              closePicker();
            }
          };
        }
        grid.appendChild(div);
      }
    }
  </script>
</body>
</html>
